import { NodeTemplate } from "../types/flow";

export const nodeTemplates: NodeTemplate[] = [
  // ============================================
  // TRIGGER - Scheduling & Triggers
  // ============================================
  // NOTE: Schedule Trigger removed - scheduling is handled by the Orchestrator, not Studio
  {
    type: "trigger.file_watch",
    category: "trigger",
    label: "File Watch",
    description: "Trigger when file changes",
    icon: "Eye",
    defaultConfig: { path: "", events: ["created", "modified"] },
    configSchema: [
      { name: "path", label: "Watch Path", type: "text", required: true, placeholder: "/path/to/folder" },
      { name: "pattern", label: "File Pattern", type: "text", placeholder: "*.csv" },
    ],
  },
  {
    type: "trigger.email_received",
    category: "trigger",
    label: "Email Trigger",
    description: "Trigger when email received",
    icon: "MailOpen",
    defaultConfig: {},
    configSchema: [
      { name: "folder", label: "Mail Folder", type: "text", default: "INBOX" },
      { name: "filter", label: "Subject Filter", type: "text", placeholder: "Invoice*" },
    ],
  },
  {
    type: "trigger.webhook",
    category: "trigger",
    label: "Webhook Trigger",
    description: "Trigger via HTTP webhook",
    icon: "Webhook",
    defaultConfig: { method: "POST" },
    configSchema: [
      { name: "path", label: "Webhook Path", type: "text", required: true, placeholder: "/webhook/my-trigger" },
      { name: "method", label: "HTTP Method", type: "select", default: "POST", options: [{ value: "GET", label: "GET" }, { value: "POST", label: "POST" }] },
    ],
    outputSchema: [
      { name: "body", type: "object", description: "Request body (JSON)" },
      { name: "headers", type: "object", description: "Request headers" },
      { name: "query", type: "object", description: "Query parameters" },
    ],
  },
  {
    type: "trigger.queue",
    category: "trigger",
    label: "Queue Trigger",
    description: "Trigger from message queue",
    icon: "ListOrdered",
    defaultConfig: {},
    configSchema: [
      { name: "queue_name", label: "Queue Name", type: "text", required: true },
    ],
  },
  {
    type: "trigger.manual",
    category: "trigger",
    label: "Manual Trigger",
    description: "Start workflow manually",
    icon: "Play",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "trigger.form",
    category: "trigger",
    label: "Form Trigger",
    description: "Start workflow when form is submitted",
    icon: "FileText",
    defaultConfig: {
      formTitle: "My Form",
      formDescription: "",
      submitButtonLabel: "Submit",
      fields: [],
    },
    configSchema: [
      { name: "formTitle", label: "Form Title", type: "text", required: true, placeholder: "Contact Form" },
      { name: "formDescription", label: "Description", type: "textarea", placeholder: "Please fill out this form..." },
      { name: "submitButtonLabel", label: "Submit Button Text", type: "text", default: "Submit" },
      { name: "fields", label: "", type: "form-builder" },
    ],
    // Output: all form fields are available as ${formData.fieldId}
    outputSchema: [
      { name: "formData", type: "object", description: "All submitted form data", example: '{"nombre": "Juan", "email": "j@mail.com"}' },
      { name: "submissionId", type: "string", description: "Unique submission ID" },
      { name: "submittedAt", type: "string", description: "Timestamp of submission" },
    ],
  },
  {
    type: "trigger.api_polling",
    category: "trigger",
    label: "API Polling",
    description: "Poll an API endpoint at intervals",
    icon: "RefreshCw",
    defaultConfig: { method: "GET", interval: 60 },
    configSchema: [
      { name: "url", label: "API URL", type: "text", required: true, placeholder: "https://api.example.com/status" },
      { name: "method", label: "HTTP Method", type: "select", default: "GET", options: [{ value: "GET", label: "GET" }, { value: "POST", label: "POST" }] },
      { name: "interval", label: "Polling Interval (seconds)", type: "number", default: 60 },
      { name: "headers", label: "Headers (JSON)", type: "textarea", placeholder: '{"Authorization": "Bearer ..."}' },
      { name: "condition", label: "Trigger Condition (JSONPath)", type: "text", placeholder: "$.status == 'ready'" },
    ],
  },
  {
    type: "trigger.database_change",
    category: "trigger",
    label: "Database Change",
    description: "Trigger when database records change",
    icon: "DatabaseZap",
    defaultConfig: { event: "INSERT" },
    configSchema: [
      { name: "connection", label: "Connection Name", type: "text", required: true },
      { name: "table", label: "Table Name", type: "text", required: true },
      { name: "event", label: "Event Type", type: "select", default: "INSERT", options: [{ value: "INSERT", label: "Insert" }, { value: "UPDATE", label: "Update" }, { value: "DELETE", label: "Delete" }, { value: "ALL", label: "All Changes" }] },
      { name: "filter", label: "Filter Condition", type: "text", placeholder: "status = 'pending'" },
    ],
  },
  {
    type: "trigger.storage_event",
    category: "trigger",
    label: "Storage Event",
    description: "Trigger on S3/MinIO storage events",
    icon: "HardDrive",
    defaultConfig: { event: "ObjectCreated" },
    configSchema: [
      { name: "bucket", label: "Bucket Name", type: "text", required: true },
      { name: "prefix", label: "Path Prefix", type: "text", placeholder: "uploads/" },
      { name: "event", label: "Event Type", type: "select", default: "ObjectCreated", options: [{ value: "ObjectCreated", label: "Object Created" }, { value: "ObjectRemoved", label: "Object Removed" }, { value: "ObjectModified", label: "Object Modified" }] },
      { name: "suffix", label: "File Suffix Filter", type: "text", placeholder: ".pdf" },
    ],
  },
  {
    type: "trigger.message_bus",
    category: "trigger",
    label: "Message Bus",
    description: "Trigger from Kafka/RabbitMQ/Redis",
    icon: "Radio",
    defaultConfig: { provider: "rabbitmq" },
    configSchema: [
      { name: "provider", label: "Provider", type: "select", default: "rabbitmq", options: [{ value: "rabbitmq", label: "RabbitMQ" }, { value: "kafka", label: "Kafka" }, { value: "redis", label: "Redis Pub/Sub" }, { value: "sqs", label: "AWS SQS" }] },
      { name: "connection", label: "Connection String", type: "text", required: true, placeholder: "amqp://localhost:5672" },
      { name: "topic", label: "Topic/Queue Name", type: "text", required: true },
      { name: "consumer_group", label: "Consumer Group", type: "text", placeholder: "skuldbot-workers" },
    ],
  },
  {
    type: "trigger.chat",
    category: "trigger",
    label: "Chat Trigger",
    description: "Trigger from chat message (Slack, Teams, Telegram)",
    icon: "MessageCircle",
    defaultConfig: { platform: "slack" },
    configSchema: [
      { name: "platform", label: "Platform", type: "select", default: "slack", options: [{ value: "slack", label: "Slack" }, { value: "teams", label: "Microsoft Teams" }, { value: "telegram", label: "Telegram" }, { value: "discord", label: "Discord" }] },
      { name: "bot_token", label: "Bot Token", type: "password", required: true },
      { name: "channel", label: "Channel/Chat ID", type: "text", placeholder: "#general or C12345678" },
      { name: "command", label: "Command Prefix", type: "text", placeholder: "/runbot" },
      { name: "mention_only", label: "Only on Mention", type: "boolean", default: true },
    ],
  },

  // ============================================
  // WEB - Web Automation
  // ============================================
  {
    type: "web.open_browser",
    category: "web",
    label: "Open Browser",
    description: "Open a web browser",
    icon: "Globe",
    defaultConfig: { browser: "chromium", headless: false },
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true, placeholder: "https://example.com" },
      { name: "browser", label: "Browser", type: "select", default: "chromium", options: [{ value: "chromium", label: "Chromium" }, { value: "firefox", label: "Firefox" }, { value: "webkit", label: "WebKit" }] },
      { name: "headless", label: "Headless Mode (invisible browser)", type: "boolean", default: false },
    ],
  },
  {
    type: "web.navigate",
    category: "web",
    label: "Navigate To",
    description: "Navigate to URL",
    icon: "ExternalLink",
    defaultConfig: {},
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true, placeholder: "https://example.com" },
      { name: "wait_until", label: "Wait Until", type: "select", default: "load", options: [{ value: "load", label: "Page Load" }, { value: "domcontentloaded", label: "DOM Ready" }, { value: "networkidle", label: "Network Idle" }] },
    ],
  },
  {
    type: "web.click",
    category: "web",
    label: "Click Element",
    description: "Click on an element",
    icon: "MousePointer2",
    defaultConfig: {},
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true, placeholder: "#button-id" },
      { name: "timeout", label: "Timeout (ms)", type: "number", default: 30000 },
    ],
  },
  {
    type: "web.type",
    category: "web",
    label: "Type Text",
    description: "Type text into field",
    icon: "Type",
    defaultConfig: {},
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true },
      { name: "text", label: "Text to Type", type: "text", required: true },
      { name: "clear", label: "Clear Field First", type: "boolean", default: true },
    ],
  },
  {
    type: "web.select_option",
    category: "web",
    label: "Select Option",
    description: "Select dropdown option",
    icon: "ChevronDown",
    defaultConfig: {},
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true },
      { name: "value", label: "Value", type: "text", required: true },
    ],
  },
  {
    type: "web.get_text",
    category: "web",
    label: "Get Text",
    description: "Extract text from element",
    icon: "TextCursor",
    defaultConfig: {},
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true, supportsExpressions: true },
    ],
    outputSchema: [
      { name: "text", type: "string", description: "Extracted text content" },
    ],
  },
  {
    type: "web.get_attribute",
    category: "web",
    label: "Get Attribute",
    description: "Get element attribute",
    icon: "Tag",
    defaultConfig: {},
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true, supportsExpressions: true },
      { name: "attribute", label: "Attribute Name", type: "text", required: true, placeholder: "href" },
    ],
    outputSchema: [
      { name: "value", type: "string", description: "Attribute value" },
    ],
  },
  {
    type: "web.screenshot",
    category: "web",
    label: "Screenshot",
    description: "Take a screenshot",
    icon: "Camera",
    defaultConfig: { full_page: false },
    configSchema: [
      { name: "path", label: "Save Path", type: "text", placeholder: "./screenshot.png" },
      { name: "full_page", label: "Full Page", type: "boolean", default: false },
    ],
  },
  {
    type: "web.wait_element",
    category: "web",
    label: "Wait for Element",
    description: "Wait for element to appear",
    icon: "Clock",
    defaultConfig: { timeout: 30000 },
    configSchema: [
      { name: "selector", label: "CSS Selector", type: "text", required: true },
      { name: "state", label: "Wait For", type: "select", default: "visible", options: [{ value: "visible", label: "Visible" }, { value: "hidden", label: "Hidden" }, { value: "attached", label: "Attached" }] },
      { name: "timeout", label: "Timeout (ms)", type: "number", default: 30000 },
    ],
  },
  {
    type: "web.execute_js",
    category: "web",
    label: "Execute JavaScript",
    description: "Run JavaScript in browser",
    icon: "Code",
    defaultConfig: {},
    configSchema: [
      { name: "script", label: "JavaScript Code", type: "textarea", required: true, placeholder: "return document.title;" },
    ],
    outputSchema: [
      { name: "result", type: "any", description: "Return value from JavaScript" },
    ],
  },
  {
    type: "web.scroll",
    category: "web",
    label: "Scroll Page",
    description: "Scroll the page",
    icon: "ArrowDown",
    defaultConfig: {},
    configSchema: [
      { name: "direction", label: "Direction", type: "select", default: "down", options: [{ value: "down", label: "Down" }, { value: "up", label: "Up" }, { value: "to_element", label: "To Element" }] },
      { name: "selector", label: "Element (if To Element)", type: "text" },
    ],
  },
  {
    type: "web.handle_alert",
    category: "web",
    label: "Handle Alert",
    description: "Accept/dismiss alerts",
    icon: "AlertCircle",
    defaultConfig: { action: "accept" },
    configSchema: [
      { name: "action", label: "Action", type: "select", default: "accept", options: [{ value: "accept", label: "Accept" }, { value: "dismiss", label: "Dismiss" }] },
    ],
  },
  {
    type: "web.switch_tab",
    category: "web",
    label: "Switch Tab",
    description: "Switch browser tab",
    icon: "PanelLeft",
    defaultConfig: {},
    configSchema: [
      { name: "tab_index", label: "Tab Index", type: "number", default: 0 },
    ],
  },
  {
    type: "web.close_browser",
    category: "web",
    label: "Close Browser",
    description: "Close the browser",
    icon: "X",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "web.download_file",
    category: "web",
    label: "Download File",
    description: "Download a file",
    icon: "Download",
    defaultConfig: {},
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true },
      { name: "path", label: "Save Path", type: "text", required: true },
    ],
  },

  // ============================================
  // DESKTOP - Desktop Automation (Windows)
  // ============================================
  {
    type: "desktop.open_app",
    category: "desktop",
    label: "Open Application",
    description: "Launch an application",
    icon: "AppWindow",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Application Path", type: "text", required: true },
      { name: "args", label: "Arguments", type: "text" },
    ],
  },
  {
    type: "desktop.click",
    category: "desktop",
    label: "Desktop Click",
    description: "Click at coordinates or element",
    icon: "MousePointer",
    defaultConfig: {},
    configSchema: [
      { name: "locator", label: "Element Locator", type: "text", placeholder: "name:Button1" },
      { name: "x", label: "X Coordinate", type: "number" },
      { name: "y", label: "Y Coordinate", type: "number" },
    ],
  },
  {
    type: "desktop.type_text",
    category: "desktop",
    label: "Type Text",
    description: "Type text with keyboard",
    icon: "Keyboard",
    defaultConfig: {},
    configSchema: [
      { name: "text", label: "Text", type: "text", required: true },
      { name: "interval", label: "Key Interval (ms)", type: "number", default: 50 },
    ],
  },
  {
    type: "desktop.hotkey",
    category: "desktop",
    label: "Send Hotkey",
    description: "Press keyboard shortcut",
    icon: "Command",
    defaultConfig: {},
    configSchema: [
      { name: "keys", label: "Key Combination", type: "text", required: true, placeholder: "ctrl+c" },
    ],
  },
  {
    type: "desktop.get_window",
    category: "desktop",
    label: "Get Window",
    description: "Find and focus window",
    icon: "Square",
    defaultConfig: {},
    configSchema: [
      { name: "title", label: "Window Title", type: "text", required: true },
      { name: "partial_match", label: "Partial Match", type: "boolean", default: true },
    ],
  },
  {
    type: "desktop.minimize",
    category: "desktop",
    label: "Minimize Window",
    description: "Minimize active window",
    icon: "Minus",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "desktop.maximize",
    category: "desktop",
    label: "Maximize Window",
    description: "Maximize active window",
    icon: "Maximize2",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "desktop.close_window",
    category: "desktop",
    label: "Close Window",
    description: "Close active window",
    icon: "XSquare",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "desktop.screenshot",
    category: "desktop",
    label: "Desktop Screenshot",
    description: "Capture screen region",
    icon: "Monitor",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Save Path", type: "text", required: true },
      { name: "region", label: "Region (x,y,w,h)", type: "text", placeholder: "0,0,1920,1080" },
    ],
  },
  {
    type: "desktop.image_click",
    category: "desktop",
    label: "Click Image",
    description: "Find and click image on screen",
    icon: "Image",
    defaultConfig: {},
    configSchema: [
      { name: "image_path", label: "Image Path", type: "text", required: true },
      { name: "confidence", label: "Confidence (0-1)", type: "number", default: 0.9 },
    ],
  },
  {
    type: "desktop.wait_image",
    category: "desktop",
    label: "Wait for Image",
    description: "Wait for image to appear",
    icon: "ScanSearch",
    defaultConfig: { timeout: 30000 },
    configSchema: [
      { name: "image_path", label: "Image Path", type: "text", required: true },
      { name: "timeout", label: "Timeout (ms)", type: "number", default: 30000 },
    ],
  },
  {
    type: "desktop.clipboard_copy",
    category: "desktop",
    label: "Copy to Clipboard",
    description: "Copy text to clipboard",
    icon: "Copy",
    defaultConfig: {},
    configSchema: [
      { name: "text", label: "Text", type: "text", required: true },
    ],
  },

  // ============================================
  // FILES - Files & Folders
  // ============================================
  {
    type: "files.read",
    category: "files",
    label: "Read File",
    description: "Read file contents",
    icon: "FileInput",
    defaultConfig: { encoding: "utf-8" },
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
      { name: "encoding", label: "Encoding", type: "select", default: "utf-8", options: [{ value: "utf-8", label: "UTF-8" }, { value: "ascii", label: "ASCII" }, { value: "latin1", label: "Latin-1" }] },
    ],
  },
  {
    type: "files.write",
    category: "files",
    label: "Write File",
    description: "Write to file",
    icon: "FileOutput",
    defaultConfig: { append: false },
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
      { name: "content", label: "Content", type: "textarea", required: true },
      { name: "append", label: "Append Mode", type: "boolean", default: false },
    ],
  },
  {
    type: "files.copy",
    category: "files",
    label: "Copy File",
    description: "Copy file or folder",
    icon: "Copy",
    defaultConfig: {},
    configSchema: [
      { name: "source", label: "Source Path", type: "text", required: true },
      { name: "destination", label: "Destination", type: "text", required: true },
    ],
  },
  {
    type: "files.move",
    category: "files",
    label: "Move File",
    description: "Move or rename file",
    icon: "FolderInput",
    defaultConfig: {},
    configSchema: [
      { name: "source", label: "Source Path", type: "text", required: true },
      { name: "destination", label: "Destination", type: "text", required: true },
    ],
  },
  {
    type: "files.delete",
    category: "files",
    label: "Delete File",
    description: "Delete file or folder",
    icon: "Trash2",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Path", type: "text", required: true },
      { name: "recursive", label: "Recursive (folders)", type: "boolean", default: false },
    ],
  },
  {
    type: "files.create_folder",
    category: "files",
    label: "Create Folder",
    description: "Create new folder",
    icon: "FolderPlus",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Folder Path", type: "text", required: true },
    ],
  },
  {
    type: "files.list",
    category: "files",
    label: "List Files",
    description: "List files in folder",
    icon: "FolderOpen",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Folder Path", type: "text", required: true },
      { name: "pattern", label: "Pattern", type: "text", placeholder: "*.csv" },
      { name: "recursive", label: "Recursive", type: "boolean", default: false },
    ],
  },
  {
    type: "files.exists",
    category: "files",
    label: "File Exists",
    description: "Check if file exists",
    icon: "FileSearch",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
    ],
  },
  {
    type: "files.zip",
    category: "files",
    label: "Create ZIP",
    description: "Compress files to ZIP",
    icon: "Archive",
    defaultConfig: {},
    configSchema: [
      { name: "source", label: "Source Path", type: "text", required: true },
      { name: "destination", label: "ZIP Path", type: "text", required: true },
    ],
  },
  {
    type: "files.unzip",
    category: "files",
    label: "Extract ZIP",
    description: "Extract ZIP archive",
    icon: "FolderArchive",
    defaultConfig: {},
    configSchema: [
      { name: "source", label: "ZIP Path", type: "text", required: true },
      { name: "destination", label: "Extract To", type: "text", required: true },
    ],
  },
  {
    type: "files.get_info",
    category: "files",
    label: "Get File Info",
    description: "Get file metadata",
    icon: "FileText",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
    ],
  },
  {
    type: "files.watch",
    category: "files",
    label: "Watch Folder",
    description: "Monitor folder for changes",
    icon: "Eye",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Folder Path", type: "text", required: true },
      { name: "pattern", label: "File Pattern", type: "text", placeholder: "*.*" },
    ],
  },

  // ============================================
  // EXCEL - Excel / CSV / Data
  // ============================================
  {
    type: "excel.open",
    category: "excel",
    label: "Open Excel",
    description: "Open Excel workbook",
    icon: "FileSpreadsheet",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
      { name: "sheet", label: "Sheet Name", type: "text" },
    ],
  },
  {
    type: "excel.read_range",
    category: "excel",
    label: "Read Range",
    description: "Read cell range",
    icon: "Table",
    defaultConfig: { header: true },
    configSchema: [
      { name: "range", label: "Range", type: "text", placeholder: "A1:D100" },
      { name: "sheet", label: "Sheet", type: "text" },
      { name: "header", label: "First Row as Header", type: "boolean", default: true },
    ],
    outputSchema: [
      { name: "data", type: "array", description: "Array of rows (objects if header=true)" },
      { name: "rowCount", type: "number", description: "Number of rows read" },
    ],
  },
  {
    type: "excel.write_range",
    category: "excel",
    label: "Write Range",
    description: "Write data to cells",
    icon: "Table2",
    defaultConfig: {},
    configSchema: [
      { name: "range", label: "Start Cell", type: "text", required: true, placeholder: "A1" },
      { name: "data", label: "Data (JSON)", type: "textarea", required: true },
      { name: "sheet", label: "Sheet", type: "text" },
    ],
  },
  {
    type: "excel.read_cell",
    category: "excel",
    label: "Read Cell",
    description: "Read single cell",
    icon: "SquareStack",
    defaultConfig: {},
    configSchema: [
      { name: "cell", label: "Cell", type: "text", required: true, placeholder: "A1" },
      { name: "sheet", label: "Sheet", type: "text" },
    ],
    outputSchema: [
      { name: "value", type: "any", description: "Cell value" },
    ],
  },
  {
    type: "excel.write_cell",
    category: "excel",
    label: "Write Cell",
    description: "Write to single cell",
    icon: "PenLine",
    defaultConfig: {},
    configSchema: [
      { name: "cell", label: "Cell", type: "text", required: true, placeholder: "A1" },
      { name: "value", label: "Value", type: "text", required: true },
      { name: "sheet", label: "Sheet", type: "text" },
    ],
  },
  {
    type: "excel.add_row",
    category: "excel",
    label: "Add Row",
    description: "Append row to sheet",
    icon: "ListPlus",
    defaultConfig: {},
    configSchema: [
      { name: "data", label: "Row Data (JSON array)", type: "textarea", required: true },
      { name: "sheet", label: "Sheet", type: "text" },
    ],
  },
  {
    type: "excel.filter",
    category: "excel",
    label: "Filter Data",
    description: "Filter Excel data",
    icon: "Filter",
    defaultConfig: {},
    configSchema: [
      { name: "column", label: "Column", type: "text", required: true },
      { name: "condition", label: "Condition", type: "text", required: true, placeholder: "> 100" },
    ],
  },
  {
    type: "excel.save",
    category: "excel",
    label: "Save Excel",
    description: "Save workbook",
    icon: "Save",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Save Path (optional)", type: "text" },
    ],
  },
  {
    type: "excel.close",
    category: "excel",
    label: "Close Excel",
    description: "Close workbook",
    icon: "X",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "excel.csv_read",
    category: "excel",
    label: "Read CSV",
    description: "Read CSV file",
    icon: "FileText",
    defaultConfig: { delimiter: "," },
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
      { name: "delimiter", label: "Delimiter", type: "text", default: "," },
      { name: "header", label: "Has Header", type: "boolean", default: true },
    ],
  },
  {
    type: "excel.csv_write",
    category: "excel",
    label: "Write CSV",
    description: "Write to CSV file",
    icon: "FileOutput",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
      { name: "data", label: "Data (JSON)", type: "textarea", required: true },
      { name: "delimiter", label: "Delimiter", type: "text", default: "," },
    ],
  },
  {
    type: "excel.pivot",
    category: "excel",
    label: "Create Pivot",
    description: "Create pivot table",
    icon: "PieChart",
    defaultConfig: {},
    configSchema: [
      { name: "source_range", label: "Source Range", type: "text", required: true },
      { name: "rows", label: "Row Fields", type: "text", required: true },
      { name: "values", label: "Value Fields", type: "text", required: true },
    ],
  },

  // ============================================
  // EMAIL - Email Operations
  // ============================================
  {
    type: "email.send",
    category: "email",
    label: "Send Email",
    description: "Send an email",
    icon: "Send",
    defaultConfig: {},
    configSchema: [
      { name: "to", label: "To", type: "text", required: true },
      { name: "subject", label: "Subject", type: "text", required: true },
      { name: "body", label: "Body", type: "textarea", required: true },
      { name: "html", label: "HTML Body", type: "boolean", default: false },
    ],
  },
  {
    type: "email.read",
    category: "email",
    label: "Read Emails",
    description: "Read emails from mailbox",
    icon: "MailOpen",
    defaultConfig: { folder: "INBOX", limit: 10 },
    configSchema: [
      { name: "folder", label: "Folder", type: "text", default: "INBOX" },
      { name: "filter", label: "Subject Filter", type: "text" },
      { name: "unread_only", label: "Unread Only", type: "boolean", default: true },
      { name: "limit", label: "Max Emails", type: "number", default: 10 },
    ],
  },
  {
    type: "email.reply",
    category: "email",
    label: "Reply to Email",
    description: "Reply to an email",
    icon: "Reply",
    defaultConfig: {},
    configSchema: [
      { name: "message_id", label: "Original Message ID", type: "text", required: true },
      { name: "body", label: "Reply Body", type: "textarea", required: true },
    ],
  },
  {
    type: "email.forward",
    category: "email",
    label: "Forward Email",
    description: "Forward an email",
    icon: "Forward",
    defaultConfig: {},
    configSchema: [
      { name: "message_id", label: "Original Message ID", type: "text", required: true },
      { name: "to", label: "Forward To", type: "text", required: true },
    ],
  },
  {
    type: "email.download_attachment",
    category: "email",
    label: "Download Attachment",
    description: "Save email attachment",
    icon: "Paperclip",
    defaultConfig: {},
    configSchema: [
      { name: "message_id", label: "Message ID", type: "text", required: true },
      { name: "save_path", label: "Save Path", type: "text", required: true },
    ],
  },
  {
    type: "email.move",
    category: "email",
    label: "Move Email",
    description: "Move email to folder",
    icon: "FolderInput",
    defaultConfig: {},
    configSchema: [
      { name: "message_id", label: "Message ID", type: "text", required: true },
      { name: "folder", label: "Target Folder", type: "text", required: true },
    ],
  },
  {
    type: "email.delete",
    category: "email",
    label: "Delete Email",
    description: "Delete an email",
    icon: "Trash2",
    defaultConfig: {},
    configSchema: [
      { name: "message_id", label: "Message ID", type: "text", required: true },
    ],
  },
  {
    type: "email.mark_read",
    category: "email",
    label: "Mark as Read",
    description: "Mark email as read/unread",
    icon: "CheckCircle",
    defaultConfig: { read: true },
    configSchema: [
      { name: "message_id", label: "Message ID", type: "text", required: true },
      { name: "read", label: "Mark as Read", type: "boolean", default: true },
    ],
  },
  {
    type: "email.search",
    category: "email",
    label: "Search Emails",
    description: "Search emails with criteria",
    icon: "Search",
    defaultConfig: {},
    configSchema: [
      { name: "query", label: "Search Query", type: "text", required: true },
      { name: "folder", label: "Folder", type: "text", default: "INBOX" },
    ],
  },

  // ============================================
  // API - API & Integration
  // ============================================
  {
    type: "api.http_request",
    category: "api",
    label: "HTTP Request",
    description: "Make HTTP request",
    icon: "Globe",
    defaultConfig: { method: "GET" },
    configSchema: [
      { name: "method", label: "Method", type: "select", default: "GET", options: [{ value: "GET", label: "GET" }, { value: "POST", label: "POST" }, { value: "PUT", label: "PUT" }, { value: "PATCH", label: "PATCH" }, { value: "DELETE", label: "DELETE" }] },
      { name: "url", label: "URL", type: "text", required: true, supportsExpressions: true },
      { name: "headers", label: "Headers (JSON)", type: "textarea", supportsExpressions: true },
      { name: "body", label: "Body (JSON)", type: "textarea", supportsExpressions: true },
    ],
    outputSchema: [
      { name: "statusCode", type: "number", description: "HTTP status code", example: "200" },
      { name: "body", type: "object", description: "Response body (JSON)" },
      { name: "headers", type: "object", description: "Response headers" },
    ],
  },
  {
    type: "api.graphql",
    category: "api",
    label: "GraphQL Query",
    description: "Execute GraphQL query",
    icon: "Braces",
    defaultConfig: {},
    configSchema: [
      { name: "endpoint", label: "Endpoint", type: "text", required: true },
      { name: "query", label: "Query", type: "textarea", required: true },
      { name: "variables", label: "Variables (JSON)", type: "textarea" },
    ],
  },
  {
    type: "api.rest_get",
    category: "api",
    label: "REST GET",
    description: "Simple GET request",
    icon: "ArrowDownToLine",
    defaultConfig: {},
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true },
      { name: "headers", label: "Headers (JSON)", type: "textarea" },
    ],
  },
  {
    type: "api.rest_post",
    category: "api",
    label: "REST POST",
    description: "Simple POST request",
    icon: "ArrowUpToLine",
    defaultConfig: {},
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true },
      { name: "body", label: "Body (JSON)", type: "textarea", required: true },
      { name: "headers", label: "Headers (JSON)", type: "textarea" },
    ],
  },
  {
    type: "api.soap",
    category: "api",
    label: "SOAP Request",
    description: "Make SOAP request",
    icon: "FileCode",
    defaultConfig: {},
    configSchema: [
      { name: "wsdl", label: "WSDL URL", type: "text", required: true },
      { name: "operation", label: "Operation", type: "text", required: true },
      { name: "body", label: "XML Body", type: "textarea" },
    ],
  },
  {
    type: "api.oauth_token",
    category: "api",
    label: "Get OAuth Token",
    description: "Authenticate with OAuth",
    icon: "Key",
    defaultConfig: { grant_type: "client_credentials" },
    configSchema: [
      { name: "token_url", label: "Token URL", type: "text", required: true },
      { name: "client_id", label: "Client ID", type: "text", required: true },
      { name: "client_secret", label: "Client Secret", type: "text", required: true },
      { name: "grant_type", label: "Grant Type", type: "select", default: "client_credentials", options: [{ value: "client_credentials", label: "Client Credentials" }, { value: "password", label: "Password" }] },
    ],
  },
  {
    type: "api.parse_json",
    category: "api",
    label: "Parse JSON",
    description: "Parse JSON string",
    icon: "Braces",
    defaultConfig: {},
    configSchema: [
      { name: "input", label: "JSON String", type: "textarea", required: true },
    ],
  },
  {
    type: "api.json_path",
    category: "api",
    label: "JSONPath Query",
    description: "Extract with JSONPath",
    icon: "GitBranch",
    defaultConfig: {},
    configSchema: [
      { name: "json", label: "JSON Data", type: "textarea", required: true },
      { name: "path", label: "JSONPath", type: "text", required: true, placeholder: "$.data[*].name" },
    ],
  },
  {
    type: "api.ftp_upload",
    category: "api",
    label: "FTP Upload",
    description: "Upload file via FTP",
    icon: "Upload",
    defaultConfig: {},
    configSchema: [
      { name: "host", label: "FTP Host", type: "text", required: true },
      { name: "username", label: "Username", type: "text", required: true },
      { name: "password", label: "Password", type: "text", required: true },
      { name: "local_path", label: "Local File", type: "text", required: true },
      { name: "remote_path", label: "Remote Path", type: "text", required: true },
    ],
  },

  // ============================================
  // DATABASE - Database Operations
  // ============================================
  {
    type: "database.connect",
    category: "database",
    label: "Connect Database",
    description: "Connect to database",
    icon: "Database",
    defaultConfig: { type: "postgresql" },
    configSchema: [
      { name: "type", label: "Database Type", type: "select", default: "postgresql", options: [{ value: "postgresql", label: "PostgreSQL" }, { value: "mysql", label: "MySQL" }, { value: "mssql", label: "SQL Server" }, { value: "oracle", label: "Oracle" }, { value: "sqlite", label: "SQLite" }] },
      { name: "connection_string", label: "Connection String", type: "text", required: true },
    ],
  },
  {
    type: "database.query",
    category: "database",
    label: "Execute Query",
    description: "Run SQL query",
    icon: "Code",
    defaultConfig: {},
    configSchema: [
      { name: "query", label: "SQL Query", type: "textarea", required: true },
      { name: "params", label: "Parameters (JSON)", type: "textarea" },
    ],
  },
  {
    type: "database.insert",
    category: "database",
    label: "Insert Row",
    description: "Insert data into table",
    icon: "Plus",
    defaultConfig: {},
    configSchema: [
      { name: "table", label: "Table Name", type: "text", required: true },
      { name: "data", label: "Data (JSON)", type: "textarea", required: true },
    ],
  },
  {
    type: "database.update",
    category: "database",
    label: "Update Rows",
    description: "Update table data",
    icon: "RefreshCw",
    defaultConfig: {},
    configSchema: [
      { name: "table", label: "Table Name", type: "text", required: true },
      { name: "data", label: "Data (JSON)", type: "textarea", required: true },
      { name: "where", label: "WHERE Clause", type: "text", required: true },
    ],
  },
  {
    type: "database.delete",
    category: "database",
    label: "Delete Rows",
    description: "Delete from table",
    icon: "Trash2",
    defaultConfig: {},
    configSchema: [
      { name: "table", label: "Table Name", type: "text", required: true },
      { name: "where", label: "WHERE Clause", type: "text", required: true },
    ],
  },
  {
    type: "database.call_procedure",
    category: "database",
    label: "Call Procedure",
    description: "Execute stored procedure",
    icon: "Play",
    defaultConfig: {},
    configSchema: [
      { name: "procedure", label: "Procedure Name", type: "text", required: true },
      { name: "params", label: "Parameters (JSON)", type: "textarea" },
    ],
  },
  {
    type: "database.transaction",
    category: "database",
    label: "Transaction",
    description: "Start database transaction",
    icon: "GitMerge",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "database.commit",
    category: "database",
    label: "Commit",
    description: "Commit transaction",
    icon: "Check",
    defaultConfig: {},
    configSchema: [],
  },
  {
    type: "database.close",
    category: "database",
    label: "Close Connection",
    description: "Close database connection",
    icon: "X",
    defaultConfig: {},
    configSchema: [],
  },

  // ============================================
  // DOCUMENT - PDF / OCR / Documents
  // ============================================
  {
    type: "document.pdf_read",
    category: "document",
    label: "Read PDF",
    description: "Extract text from PDF",
    icon: "FileText",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "PDF Path", type: "text", required: true },
      { name: "pages", label: "Pages (e.g., 1-5)", type: "text" },
    ],
  },
  {
    type: "document.pdf_merge",
    category: "document",
    label: "Merge PDFs",
    description: "Combine multiple PDFs",
    icon: "FilePlus",
    defaultConfig: {},
    configSchema: [
      { name: "files", label: "PDF Files (JSON array)", type: "textarea", required: true },
      { name: "output", label: "Output Path", type: "text", required: true },
    ],
  },
  {
    type: "document.pdf_split",
    category: "document",
    label: "Split PDF",
    description: "Split PDF into pages",
    icon: "Scissors",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "PDF Path", type: "text", required: true },
      { name: "pages", label: "Pages to Extract", type: "text", required: true },
      { name: "output", label: "Output Path", type: "text", required: true },
    ],
  },
  {
    type: "document.pdf_to_image",
    category: "document",
    label: "PDF to Image",
    description: "Convert PDF to images",
    icon: "Image",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "PDF Path", type: "text", required: true },
      { name: "output_dir", label: "Output Directory", type: "text", required: true },
      { name: "format", label: "Image Format", type: "select", default: "png", options: [{ value: "png", label: "PNG" }, { value: "jpg", label: "JPEG" }] },
    ],
  },
  {
    type: "document.ocr",
    category: "document",
    label: "OCR Extract",
    description: "Extract text with OCR",
    icon: "ScanLine",
    defaultConfig: { language: "eng" },
    configSchema: [
      { name: "path", label: "Image Path", type: "text", required: true },
      { name: "language", label: "Language", type: "select", default: "eng", options: [{ value: "eng", label: "English" }, { value: "spa", label: "Spanish" }, { value: "deu", label: "German" }, { value: "fra", label: "French" }] },
    ],
  },
  {
    type: "document.word_read",
    category: "document",
    label: "Read Word",
    description: "Read Word document",
    icon: "FileType",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "File Path", type: "text", required: true },
    ],
  },
  {
    type: "document.word_write",
    category: "document",
    label: "Write Word",
    description: "Create Word document",
    icon: "FileType2",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Output Path", type: "text", required: true },
      { name: "content", label: "Content", type: "textarea", required: true },
    ],
  },
  {
    type: "document.html_to_pdf",
    category: "document",
    label: "HTML to PDF",
    description: "Convert HTML to PDF",
    icon: "FileDown",
    defaultConfig: {},
    configSchema: [
      { name: "html", label: "HTML Content or URL", type: "textarea", required: true },
      { name: "output", label: "Output Path", type: "text", required: true },
    ],
  },
  {
    type: "document.pdf_fill_form",
    category: "document",
    label: "Fill PDF Form",
    description: "Fill PDF form fields",
    icon: "PenTool",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "PDF Path", type: "text", required: true },
      { name: "fields", label: "Field Values (JSON)", type: "textarea", required: true },
      { name: "output", label: "Output Path", type: "text", required: true },
    ],
  },

  // ============================================
  // AI - AI / Intelligent Automation
  // ============================================
  {
    type: "ai.llm_prompt",
    category: "ai",
    label: "LLM Prompt",
    description: "Send prompt to LLM",
    icon: "Sparkles",
    defaultConfig: { provider: "openai", model: "gpt-4", temperature: 0.7 },
    configSchema: [
      { name: "provider", label: "Provider", type: "select", default: "openai", options: [{ value: "openai", label: "OpenAI" }, { value: "anthropic", label: "Anthropic" }, { value: "local", label: "Local LLM" }] },
      { name: "model", label: "Model", type: "text", default: "gpt-4" },
      { name: "prompt", label: "Prompt", type: "textarea", required: true, supportsExpressions: true },
      { name: "system_prompt", label: "System Prompt", type: "textarea" },
      { name: "temperature", label: "Temperature", type: "number", default: 0.7 },
    ],
    outputSchema: [
      { name: "response", type: "string", description: "LLM response text" },
      { name: "tokens", type: "number", description: "Tokens used" },
    ],
  },
  {
    type: "ai.agent",
    category: "ai",
    label: "AI Agent",
    description: "Autonomous agent executor",
    icon: "Bot",
    defaultConfig: { max_iterations: 10 },
    configSchema: [
      { name: "name", label: "Agent Name", type: "text" },
      { name: "goal", label: "Goal", type: "textarea", required: true },
      { name: "tools", label: "Available Tools", type: "textarea" },
      { name: "max_iterations", label: "Max Iterations", type: "number", default: 10 },
    ],
  },
  {
    type: "ai.extract_data",
    category: "ai",
    label: "AI Extract Data",
    description: "Extract structured data",
    icon: "FileSearch",
    defaultConfig: {},
    configSchema: [
      { name: "input", label: "Input Text", type: "textarea", required: true, supportsExpressions: true },
      { name: "schema", label: "Output Schema (JSON)", type: "textarea", required: true },
    ],
    outputSchema: [
      { name: "extracted", type: "object", description: "Extracted data matching schema" },
    ],
  },
  {
    type: "ai.summarize",
    category: "ai",
    label: "AI Summarize",
    description: "Summarize text content",
    icon: "AlignLeft",
    defaultConfig: { style: "concise" },
    configSchema: [
      { name: "input", label: "Input Text", type: "textarea", required: true, supportsExpressions: true },
      { name: "style", label: "Style", type: "select", default: "concise", options: [{ value: "concise", label: "Concise" }, { value: "detailed", label: "Detailed" }, { value: "bullets", label: "Bullet Points" }] },
    ],
    outputSchema: [
      { name: "summary", type: "string", description: "Summarized text" },
    ],
  },
  {
    type: "ai.classify",
    category: "ai",
    label: "AI Classify",
    description: "Classify text into categories",
    icon: "Tags",
    defaultConfig: {},
    configSchema: [
      { name: "input", label: "Input Text", type: "textarea", required: true, supportsExpressions: true },
      { name: "categories", label: "Categories (comma separated)", type: "text", required: true },
    ],
    outputSchema: [
      { name: "category", type: "string", description: "Classified category" },
      { name: "confidence", type: "number", description: "Confidence score (0-1)" },
    ],
  },
  {
    type: "ai.translate",
    category: "ai",
    label: "AI Translate",
    description: "Translate text",
    icon: "Languages",
    defaultConfig: {},
    configSchema: [
      { name: "input", label: "Input Text", type: "textarea", required: true, supportsExpressions: true },
      { name: "target_language", label: "Target Language", type: "text", required: true },
    ],
    outputSchema: [
      { name: "translated", type: "string", description: "Translated text" },
    ],
  },
  {
    type: "ai.sentiment",
    category: "ai",
    label: "Sentiment Analysis",
    description: "Analyze text sentiment",
    icon: "ThumbsUp",
    defaultConfig: {},
    configSchema: [
      { name: "input", label: "Input Text", type: "textarea", required: true, supportsExpressions: true },
    ],
    outputSchema: [
      { name: "sentiment", type: "string", description: "positive, negative, or neutral" },
      { name: "score", type: "number", description: "Sentiment score (-1 to 1)" },
    ],
  },
  {
    type: "ai.vision",
    category: "ai",
    label: "AI Vision",
    description: "Analyze images with AI",
    icon: "Eye",
    defaultConfig: {},
    configSchema: [
      { name: "image_path", label: "Image Path", type: "text", required: true },
      { name: "prompt", label: "Question about image", type: "textarea", required: true },
    ],
  },
  {
    type: "ai.embeddings",
    category: "ai",
    label: "Generate Embeddings",
    description: "Create text embeddings",
    icon: "Binary",
    defaultConfig: {},
    configSchema: [
      { name: "text", label: "Text", type: "textarea", required: true },
      { name: "model", label: "Model", type: "text", default: "text-embedding-ada-002" },
    ],
  },

  // ============================================
  // PYTHON - Python Project Execution
  // ============================================
  {
    type: "python.execute",
    category: "python",
    label: "Execute Python",
    description: "Run Python code",
    icon: "Code2",
    defaultConfig: {},
    configSchema: [
      { name: "code", label: "Python Code", type: "textarea", required: true },
      { name: "variables", label: "Input Variables (JSON)", type: "textarea" },
    ],
  },
  {
    type: "python.project",
    category: "python",
    label: "Run Python Project",
    description: "Execute Python project",
    icon: "FolderCode",
    defaultConfig: {},
    configSchema: [
      { name: "project_path", label: "Project Path", type: "text", required: true },
      { name: "entrypoint", label: "Entrypoint", type: "text", required: true, placeholder: "main.py" },
      { name: "args", label: "Arguments", type: "text" },
    ],
  },
  {
    type: "python.pip_install",
    category: "python",
    label: "Pip Install",
    description: "Install Python packages",
    icon: "Package",
    defaultConfig: {},
    configSchema: [
      { name: "packages", label: "Packages", type: "text", required: true, placeholder: "pandas numpy" },
      { name: "requirements", label: "Requirements File", type: "text" },
    ],
  },
  {
    type: "python.virtualenv",
    category: "python",
    label: "Create Virtualenv",
    description: "Create Python environment",
    icon: "Box",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Environment Path", type: "text", required: true },
      { name: "python_version", label: "Python Version", type: "text", default: "3.10" },
    ],
  },
  {
    type: "python.function",
    category: "python",
    label: "Python Function",
    description: "Define reusable function",
    icon: "Braces",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Function Name", type: "text", required: true },
      { name: "code", label: "Function Code", type: "textarea", required: true },
      { name: "params", label: "Parameters", type: "text" },
    ],
  },
  {
    type: "python.import_module",
    category: "python",
    label: "Import Module",
    description: "Import Python module",
    icon: "Import",
    defaultConfig: {},
    configSchema: [
      { name: "module", label: "Module Name", type: "text", required: true },
      { name: "alias", label: "Alias", type: "text" },
    ],
  },
  {
    type: "python.notebook",
    category: "python",
    label: "Run Notebook",
    description: "Execute Jupyter notebook",
    icon: "BookOpen",
    defaultConfig: {},
    configSchema: [
      { name: "path", label: "Notebook Path", type: "text", required: true },
      { name: "output_path", label: "Output Path", type: "text" },
    ],
  },
  {
    type: "python.eval",
    category: "python",
    label: "Python Eval",
    description: "Evaluate expression",
    icon: "Calculator",
    defaultConfig: {},
    configSchema: [
      { name: "expression", label: "Expression", type: "text", required: true },
    ],
  },

  // ============================================
  // CONTROL - Control Flow
  // ============================================
  {
    type: "control.if",
    category: "control",
    label: "If Condition",
    description: "Branch based on condition",
    icon: "GitBranch",
    defaultConfig: {},
    configSchema: [
      { name: "condition", label: "Condition", type: "text", required: true, placeholder: "${count} > 10" },
    ],
  },
  {
    type: "control.switch",
    category: "control",
    label: "Switch",
    description: "Multi-way branch",
    icon: "GitFork",
    defaultConfig: {},
    configSchema: [
      { name: "expression", label: "Expression", type: "text", required: true },
      { name: "cases", label: "Cases (JSON)", type: "textarea", required: true },
    ],
  },
  {
    type: "control.loop",
    category: "control",
    label: "Loop",
    description: "Loop over items",
    icon: "Repeat",
    defaultConfig: {},
    configSchema: [
      { name: "items", label: "Items Array", type: "text", required: true, placeholder: "${items}" },
      { name: "item_var", label: "Item Variable Name", type: "text", default: "item" },
    ],
  },
  {
    type: "control.while",
    category: "control",
    label: "While Loop",
    description: "Loop while condition true",
    icon: "RefreshCw",
    defaultConfig: { max_iterations: 100 },
    configSchema: [
      { name: "condition", label: "Condition", type: "text", required: true },
      { name: "max_iterations", label: "Max Iterations", type: "number", default: 100 },
    ],
  },
  {
    type: "control.wait",
    category: "control",
    label: "Wait",
    description: "Pause execution",
    icon: "Clock",
    defaultConfig: { seconds: 1 },
    configSchema: [
      { name: "seconds", label: "Seconds", type: "number", required: true, default: 1 },
    ],
  },
  {
    type: "control.set_variable",
    category: "control",
    label: "Set Variable",
    description: "Define a variable",
    icon: "Variable",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Variable Name", type: "text", required: true },
      { name: "value", label: "Value", type: "text", required: true },
    ],
  },
  {
    type: "control.try_catch",
    category: "control",
    label: "Try/Catch",
    description: "Handle errors gracefully",
    icon: "ShieldAlert",
    defaultConfig: {},
    configSchema: [
      { name: "retry_count", label: "Retry Count", type: "number", default: 0 },
    ],
  },
  {
    type: "control.parallel",
    category: "control",
    label: "Parallel",
    description: "Run branches in parallel",
    icon: "GitBranch",
    defaultConfig: {},
    configSchema: [
      { name: "branches", label: "Number of Branches", type: "number", default: 2 },
    ],
  },
  {
    type: "control.stop",
    category: "control",
    label: "Stop Bot",
    description: "Stop execution",
    icon: "StopCircle",
    defaultConfig: {},
    configSchema: [
      { name: "status", label: "Exit Status", type: "select", default: "success", options: [{ value: "success", label: "Success" }, { value: "error", label: "Error" }] },
    ],
  },
  {
    type: "control.goto",
    category: "control",
    label: "Go To",
    description: "Jump to node",
    icon: "CornerRightDown",
    defaultConfig: {},
    configSchema: [
      { name: "target_node", label: "Target Node ID", type: "text", required: true },
    ],
  },

  // ============================================
  // LOGGING - Logging & Monitoring
  // ============================================
  {
    type: "logging.log",
    category: "logging",
    label: "Log Message",
    description: "Write log message",
    icon: "FileText",
    defaultConfig: { level: "INFO" },
    configSchema: [
      { name: "message", label: "Message", type: "textarea", required: true },
      { name: "level", label: "Level", type: "select", default: "INFO", options: [{ value: "DEBUG", label: "DEBUG" }, { value: "INFO", label: "INFO" }, { value: "WARN", label: "WARN" }, { value: "ERROR", label: "ERROR" }] },
    ],
  },
  {
    type: "logging.screenshot",
    category: "logging",
    label: "Log Screenshot",
    description: "Capture screenshot to log",
    icon: "Camera",
    defaultConfig: {},
    configSchema: [
      { name: "description", label: "Description", type: "text" },
    ],
  },
  {
    type: "logging.metric",
    category: "logging",
    label: "Log Metric",
    description: "Record numeric metric",
    icon: "BarChart3",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Metric Name", type: "text", required: true },
      { name: "value", label: "Value", type: "number", required: true },
      { name: "unit", label: "Unit", type: "text" },
    ],
  },
  {
    type: "logging.timer_start",
    category: "logging",
    label: "Start Timer",
    description: "Start performance timer",
    icon: "Timer",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Timer Name", type: "text", required: true },
    ],
  },
  {
    type: "logging.timer_stop",
    category: "logging",
    label: "Stop Timer",
    description: "Stop and log timer",
    icon: "TimerOff",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Timer Name", type: "text", required: true },
    ],
  },
  {
    type: "logging.notification",
    category: "logging",
    label: "Send Notification",
    description: "Send alert notification",
    icon: "Bell",
    defaultConfig: { channel: "email" },
    configSchema: [
      { name: "channel", label: "Channel", type: "select", default: "email", options: [{ value: "email", label: "Email" }, { value: "slack", label: "Slack" }, { value: "teams", label: "Teams" }, { value: "webhook", label: "Webhook" }] },
      { name: "message", label: "Message", type: "textarea", required: true },
    ],
  },
  {
    type: "logging.audit",
    category: "logging",
    label: "Audit Log",
    description: "Create audit entry",
    icon: "ClipboardList",
    defaultConfig: {},
    configSchema: [
      { name: "action", label: "Action", type: "text", required: true },
      { name: "details", label: "Details (JSON)", type: "textarea" },
    ],
  },
  {
    type: "logging.export",
    category: "logging",
    label: "Export Logs",
    description: "Export run logs",
    icon: "FileDown",
    defaultConfig: { format: "json" },
    configSchema: [
      { name: "path", label: "Output Path", type: "text", required: true },
      { name: "format", label: "Format", type: "select", default: "json", options: [{ value: "json", label: "JSON" }, { value: "csv", label: "CSV" }, { value: "html", label: "HTML" }] },
    ],
  },

  // ============================================
  // SECURITY - Security & Secrets
  // ============================================
  {
    type: "security.get_secret",
    category: "security",
    label: "Get Secret",
    description: "Retrieve secret from vault",
    icon: "Key",
    defaultConfig: {},
    configSchema: [
      { name: "name", label: "Secret Name", type: "text", required: true },
      { name: "vault", label: "Vault", type: "select", default: "orchestrator", options: [{ value: "orchestrator", label: "Orchestrator" }, { value: "env", label: "Environment" }, { value: "azure", label: "Azure Key Vault" }, { value: "aws", label: "AWS Secrets" }] },
    ],
  },
  {
    type: "security.encrypt",
    category: "security",
    label: "Encrypt Data",
    description: "Encrypt sensitive data",
    icon: "Lock",
    defaultConfig: {},
    configSchema: [
      { name: "data", label: "Data", type: "textarea", required: true },
      { name: "key", label: "Encryption Key", type: "text", required: true },
    ],
  },
  {
    type: "security.decrypt",
    category: "security",
    label: "Decrypt Data",
    description: "Decrypt encrypted data",
    icon: "Unlock",
    defaultConfig: {},
    configSchema: [
      { name: "data", label: "Encrypted Data", type: "textarea", required: true },
      { name: "key", label: "Decryption Key", type: "text", required: true },
    ],
  },
  {
    type: "security.hash",
    category: "security",
    label: "Hash Data",
    description: "Create data hash",
    icon: "Hash",
    defaultConfig: { algorithm: "sha256" },
    configSchema: [
      { name: "data", label: "Data", type: "textarea", required: true },
      { name: "algorithm", label: "Algorithm", type: "select", default: "sha256", options: [{ value: "sha256", label: "SHA-256" }, { value: "sha512", label: "SHA-512" }, { value: "md5", label: "MD5" }] },
    ],
  },
  {
    type: "security.mask_data",
    category: "security",
    label: "Mask Data",
    description: "Mask sensitive data in logs",
    icon: "EyeOff",
    defaultConfig: {},
    configSchema: [
      { name: "pattern", label: "Pattern to Mask", type: "text", required: true },
      { name: "mask_char", label: "Mask Character", type: "text", default: "*" },
    ],
  },
  {
    type: "security.validate_cert",
    category: "security",
    label: "Validate Certificate",
    description: "Validate SSL certificate",
    icon: "ShieldCheck",
    defaultConfig: {},
    configSchema: [
      { name: "url", label: "URL", type: "text", required: true },
    ],
  },

  // ============================================
  // HUMAN - Human-in-the-loop
  // ============================================
  {
    type: "human.approval",
    category: "human",
    label: "Request Approval",
    description: "Wait for human approval",
    icon: "UserCheck",
    defaultConfig: { timeout_minutes: 60 },
    configSchema: [
      { name: "title", label: "Request Title", type: "text", required: true },
      { name: "description", label: "Description", type: "textarea", required: true },
      { name: "approvers", label: "Approvers (emails)", type: "text" },
      { name: "timeout_minutes", label: "Timeout (minutes)", type: "number", default: 60 },
    ],
  },
  {
    type: "human.input",
    category: "human",
    label: "Request Input",
    description: "Request user input",
    icon: "MessageSquare",
    defaultConfig: {},
    configSchema: [
      { name: "prompt", label: "Prompt", type: "textarea", required: true },
      { name: "input_type", label: "Input Type", type: "select", default: "text", options: [{ value: "text", label: "Text" }, { value: "number", label: "Number" }, { value: "choice", label: "Choice" }, { value: "file", label: "File" }] },
      { name: "options", label: "Options (if Choice)", type: "text" },
    ],
  },
  {
    type: "human.review",
    category: "human",
    label: "Data Review",
    description: "Present data for review",
    icon: "ClipboardCheck",
    defaultConfig: {},
    configSchema: [
      { name: "title", label: "Review Title", type: "text", required: true },
      { name: "data", label: "Data to Review", type: "textarea", required: true },
      { name: "actions", label: "Available Actions", type: "text", default: "approve,reject,edit" },
    ],
  },
  {
    type: "human.exception",
    category: "human",
    label: "Handle Exception",
    description: "Human handles exception",
    icon: "AlertTriangle",
    defaultConfig: {},
    configSchema: [
      { name: "error", label: "Error Details", type: "textarea", required: true },
      { name: "options", label: "Resolution Options", type: "text", default: "retry,skip,abort" },
    ],
  },
  {
    type: "human.notification",
    category: "human",
    label: "Notify User",
    description: "Send notification to user",
    icon: "Bell",
    defaultConfig: {},
    configSchema: [
      { name: "recipient", label: "Recipient", type: "text", required: true },
      { name: "message", label: "Message", type: "textarea", required: true },
      { name: "priority", label: "Priority", type: "select", default: "normal", options: [{ value: "low", label: "Low" }, { value: "normal", label: "Normal" }, { value: "high", label: "High" }, { value: "urgent", label: "Urgent" }] },
    ],
  },
];

export const getNodeTemplate = (type: string): NodeTemplate | undefined => {
  return nodeTemplates.find((t) => t.type === type);
};

export const getNodesByCategory = (category: string): NodeTemplate[] => {
  return nodeTemplates.filter((t) => t.category === category);
};
